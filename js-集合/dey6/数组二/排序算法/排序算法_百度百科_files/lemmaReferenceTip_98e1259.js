define("wiki-lemma:widget/lemma_content/mainContent/lemmaReference/lemmaReferenceTip/lemmaReferenceTip.js",function(e,t,n){var i=e("wiki-common:widget/lib/jquery/jquery.js"),o=function(e){var t=['<div class="reference-tip">',"<table><tr>",'<td class="content"></td>','<td class="title" valign="middle">参考资料</td>',"</tr></table>",'<em class="triangle-bg"></em>','<em class="triangle-border"></em>',"</div>"].join(""),n=e,o=i(t),s=this,l=function(e){var t=e.text().replace("[","").replace("]","");t=t.split("-");for(var n=parseInt(t[0]),i=parseInt(t[t.length-1]),o=[],s=n;i>=s;s++)o.push(s);return o};this.display=function(e){for(var t=l(e),s=e.offset(),r=[],a=0;a<t.length;a++){var u=i("[id='reference-["+t[a]+"]-"+n.subLemmaId+"-wrap']"),c=u.find(".text"),m=u.find(".site"),f=(c.length>0?c.text().substr(0,48):"")+(m.length>0?m.text():"");r.push((t.length>1?"["+t[a]+"] ":"")+f)}var d=r.join("<br/>");o.find(".content").html(d),o.css({left:s.left-10,top:s.top-o.height()-15}),this.show()},this.show=function(){o.show()},this.hide=function(){o.hide()};var r=function(){var e=null;o.on("mosueover",function(){e&&(clearTimeout(e),e=null),s.show()}).on("mouseout",function(){e&&(clearTimeout(e),e=null),e=setTimeout(function(){s.hide()},200)}),i(document.body).on("mouseover","sup",function(t){if(!i(this).hasClass("normal")){e&&(clearTimeout(e),e=null);var n=i(t.target);s.display(n)}}).on("mouseout","sup",function(){e&&(clearTimeout(e),e=null),e=setTimeout(function(){s.hide()},200)}),o.appendTo(i(document.body))};r()};n.exports=o});